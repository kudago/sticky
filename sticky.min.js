'use strict';(function(k){function q(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b],f;for(f in d)a[f]=d[f]}return a}function g(a,b,c){e.Q?k(a).R(b,c):a.addEventListener(b,c)}function h(a){var b={top:0,left:0,right:0,bottom:0,width:0,height:0},c=a.getBoundingClientRect();b.top=c.top+(window.pageYOffset||document.documentElement.scrollTop);b.left=c.left+(window.pageXOffset||document.documentElement.scrollLeft);b.width=a.offsetWidth;b.height=a.offsetHeight;b.right=document.width-c.right;
b.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-c.bottom;return b}function r(a,b){var c={top:0,bottom:0};if(a instanceof Element){var d=h(a);c.top=Math.max(d.top,h(b).top);c.bottom=a.offsetHeight+d.top}else a instanceof Object?(a.top instanceof Element?(d=h(a.top),c.top=Math.max(d.top,h(b).top)):c.top=a.top,a.bottom instanceof Element?(d=h(a.bottom),c.bottom=a.bottom.offsetHeight+d.top):c.bottom=a.bottom):(c.top=h(b).top,c.bottom=this.n.height+this.n.top);return c}
function l(a,b){var c=getComputedStyle(b),d=h(b),f=0,e=0;"border-box"!==c["box-sizing"]&&(f=~~c.paddingLeft.slice(0,-2),e=~~c.paddingRight.slice(0,-2));a.style.width=d.width-f-e+"px";a.style.left=d.left+"px";for(d=a.style.marginLeft=0;d<m.length;d++)for(f=0;f<n.length;f++)e=m[d]+n[f],a.style[e]=c[e]}function e(a,b){if(void 0===a.getAttribute("data-sticky-id"))return console.log("Sticky already exist");this.a=a;this.parent=this.a.parentNode;var c=a.dataset;c||(c={},a.getAttribute("data-restrict-within")&&
(c.restrictWithin=a.getAttribute("data-restrict-within")),a.getAttribute("data-offset")&&(c.offset=a.getAttribute("data-offset")),a.getAttribute("data-stack")&&(c.stack=a.getAttribute("data-stack")),a.getAttribute("data-sticky-class")&&(c.stickyClass=a.getAttribute("data-sticky-class")));this.options=q({},this.options,c,b);this.restrictWithin="string"===typeof this.options.restrictWithin&&this.options.restrictWithin.trim()?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;
this.a.setAttribute("data-sticky-id",e.list.length);this.id=e.list.length;e.list.push(this);this.d=this.i=!1;this.c=!0;this.o();this.g={top:0,bottom:9999};this.height=0;this.n={top:0,height:0};this.options.offset=parseFloat(this.options.offset)||0;this.offset={top:0,bottom:0};this.e=0;this.k=[];this.stack=[];if(this.options.stack)for(var c=this.options.stack.split(","),d=c.length;d--;)c[d]=c[d].trim(),e.stack[c[d]]||(e.stack[c[d]]=[]),this.k[d]=e.stack[c[d]].length,this.stack.push(c[d]),e.stack[c[d]].push(this);
else this.k[0]=e.C.length,e.C.push(this);this.b=this.a.cloneNode();this.b.classList.add(this.options.stubClass);this.b.style.visibility="hidden";this.b.style.display="none";this.b.removeAttribute("hidden");this.q=this.a.style.cssText;this.B=getComputedStyle(this.a).display;"static"==getComputedStyle(this.parent).position&&(this.parent.style.position="relative");this.m=this.m.bind(this);this.recalc=this.recalc.bind(this);this.v=this.v.bind(this);this.disable=this.disable.bind(this);this.enable=this.enable.bind(this);
this.A=this.A.bind(this);this.w=this.w.bind(this);this.D=this.D.bind(this);this.l=this.l.bind(this);this.F=this.F.bind(this);this.t=this.t.bind(this);this.p=this.p.bind(this);this.r=this.r.bind(this);this.u=this.u.bind(this);g(document,"sticky:recalc",this.recalc);g(this.a,"sticky:recalc",this.recalc);g(this.a,"DOMNodeRemoved",this.disable);g(this.a,"DOMNodeInserted",this.enable);g(this.a,"sticky:disable",this.disable);g(this.a,"sticky:enable",this.enable);"none"===this.B?(this.B="block",this.disable()):
this.enable()}var p=["object","iframe","embed","img"],n=["left","top","right","bottom"],m=["padding-","border-"];e.list=[];e.C=[];e.stack={};e.s={};e.prototype={options:{offset:0,restrictWithin:null,vAlign:"top",stubClass:"sticky-stub",stickyClass:"is-stuck",bottomClass:"is-bottom",topClass:"is-top",stack:null,collapse:!0,O:20},disable:function(){this.b.parentNode&&this.parent.removeChild(this.b);this.P();document.dispatchEvent(new CustomEvent("sticky:recalc"))},enable:function(){this.b.parentNode||
this.parent.insertBefore(this.b,this.a);this.A();this.recalc();document.dispatchEvent(new CustomEvent("sticky:recalc"))},A:function(){document.addEventListener("scroll",this.m);window.addEventListener("resize",this.recalc);this.a.addEventListener("mouseover",this.r);this.a.addEventListener("mouseout",this.u)},P:function(){document.removeEventListener("scroll",this.m);window.removeEventListener("resize",this.recalc);this.a.removeEventListener("mouseover",this.r);this.a.removeEventListener("mouseout",
this.u)},m:function(){var a=window.pageYOffset||document.documentElement.scrollTop;if(this.i)!this.c&&a+this.offset.top+this.options.offset+this.height+this.f+this.j+this.e>=this.g.bottom-this.offset.bottom&&this.K(),!this.d&&a+this.offset.top+this.options.offset+this.f+this.e<=this.g.top&&this.L();else if(this.c||this.d)a+this.offset.top+this.options.offset+this.f>this.g.top?a+this.offset.top+this.options.offset+this.height+this.f+this.j<this.g.bottom-this.offset.bottom?this.l():this.d||(this.l(),
this.K()):this.d&&(this.l(),this.L())},L:function(){this.a.style.cssText=this.q;this.b.style.display="none";this.e=0;this.i=!1;this.c=!0;this.d=!1;this.o();this.h=!0},D:function(){this.d=this.c=this.i=!1;this.o();this.h=!0;this.I((window.pageYOffset||document.documentElement.scrollTop)+this.offset.top-this.n.top+this.e)},l:function(){this.b.style.display=this.B;this.J();this.i=!0;this.d=this.c=!1;this.o();this.h=!1},K:function(){this.H();this.e=0;this.i=!1;this.d=!0;this.c=!1;this.o();this.h=!0},
F:function(){for(var a=e.stack[this.stack[0]],b=0;b<a.length;b++)a[b].D()},t:function(){for(var a=e.stack[this.stack[0]],b=0;b<a.length;b++)a[b].l()},r:function(){var a=e.stack[this.stack[0]];if(a){var b=a[a.length-1];a[0].c||b.c||e.s[this.stack[0]]<=window.innerHeight&&0<=this.e||(this.G=(window.pageYOffset||document.documentElement.scrollTop)+this.e,document.addEventListener("scroll",this.p))}},u:function(){var a=e.stack[this.stack[0]];if(a){var b=a[a.length-1],a=a[0];document.removeEventListener("scroll",
this.p);a.c||a.d||b.c||b.d||this.h&&this.t()}},p:function(){var a=this.G-(window.pageYOffset||document.documentElement.scrollTop),b=e.stack[this.stack[0]],c=b[b.length-1],d=b[0];if(!(d.c||d.d||c.c||c.d)){d=c=!1;a<window.innerHeight-e.s[this.stack[0]]?(a=window.innerHeight-e.s[this.stack[0]],this.G=(window.pageYOffset||document.documentElement.scrollTop)+a,c=!0):0<a?(a=0,this.G=window.pageYOffset||document.documentElement.scrollTop,c=!0):this.h||(d=!0);for(var f=0;f<b.length;f++)b[f].e=a;if(c&&this.h)return this.t();
if(d&&!this.h)return this.F()}},I:function(a){this.a.style.cssText=this.q;this.a.style.position="absolute";this.a.style.top=a+"px";l(this.a,this.b);this.a.style.left=this.b.offsetLeft+"px"},H:function(){this.I(this.g.bottom-this.offset.bottom-this.n.top-this.height-this.f-this.j)},J:function(){this.a.style.cssText=this.q;this.a.style.position="fixed";this.a.style.top=this.offset.top+this.options.offset+this.e+"px";l(this.a,this.b)},o:function(){this.c?this.a.classList.add(this.options.topClass):this.a.classList.remove(this.options.topClass);
this.i?this.a.classList.add(this.options.stickyClass):this.a.classList.remove(this.options.stickyClass);this.d?this.a.classList.add(this.options.bottomClass):this.a.classList.remove(this.options.bottomClass)},recalc:function(){clearTimeout(this.M);this.M=setTimeout(this.v,this.options.O)},v:function(){var a=this.c?this.a:this.b;this.b.innerHTML=this.a.innerHTML;var b=this.b;b.removeAttribute("id");for(var c=b.querySelectorAll("[id]"),d=0;d<c.length;d++)c[d].removeAttribute("id"),c[d].removeAttribute("name");
for(c=0;c<p.length;c++)for(var d=b.querySelectorAll(p[c]),f=d.length;f--;)"SCRIPT"===d[f].tagName&&d[f].parentNode.replaceChild(d[f]),d[f].removeAttribute("src"),d[f].removeAttribute("href"),d[f].removeAttribute("rel"),d[f].removeAttribute("srcdoc");this.n=h(this.parent);this.height=this.a.offsetHeight;b=getComputedStyle(a);b.marginLeft.slice(0,-2);b.marginRight.slice(0,-2);this.f=~~b.marginTop.slice(0,-2);this.j=~~b.marginBottom.slice(0,-2);this.e=0;this.g=r(this.restrictWithin,a);this.offset.bottom=
0;this.offset.top=0;if(this.stack.length)for(c=this.stack.length;c--;){if(b=e.stack[this.stack[c]][this.k[c]-1]){d=b.c?b.a:b.b;this.offset.top=b.offset.top+b.options.offset;if(!(f=!this.options.collapse))var f=a.offsetLeft,g=a.offsetLeft+a.offsetWidth,k=d.offsetLeft,d=d.offsetWidth+d.offsetLeft,f=g<k&&f<k||g>d&&f>d?!1:!0;if(f)for(this.offset.top+=b.height+Math.max(b.f,b.j),d=e.stack[this.stack[c]][this.k[c]],f=this.k[c]-1;b=e.stack[this.stack[c]][f];f--)b.offset.bottom=Math.max(b.offset.bottom,d.offset.bottom+
d.height+d.f+d.j),d=b}e.s[this.stack[c]]=this.offset.top+this.height+this.f+this.j}else if(b=e.C[this.k[0]-1])b.g.bottom=this.g.top-this.f;clearTimeout(this.N);this.N=setTimeout(this.w,0)},w:function(){this.c?this.a.style.cssText=this.q:this.d?this.H():this.J();this.m()}};window.$?(k.fn.sticky=function(a){return this.each(function(b,c){var d=k(c),f=new e(d[0],a);d.data("sticky",f)})},e.$=window.$):window.Sticky=e})(window.jQuery||window.Zepto);
